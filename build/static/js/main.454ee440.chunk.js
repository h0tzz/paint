(this.webpackJsonpcovid19=this.webpackJsonpcovid19||[]).push([[0],{11:function(t,e,n){},17:function(t,e,n){},18:function(t,e,n){},22:function(t,e,n){"use strict";n.r(e);var s=n(1),a=n.n(s),o=n(9),i=n.n(o),c=(n(17),n(18),n(12)),r=n(3),u=n(4),h=n(2),l=new(function(){function t(){Object(r.a)(this,t),this.canvas=void 0,this.undoList=[],this.redoList=[],this.sessionid=void 0,this.ctx=void 0,Object(h.d)(this)}return Object(u.a)(t,[{key:"setCanvas",value:function(t){this.canvas=t}},{key:"pushToUndo",value:function(t){this.undoList.push(t)}},{key:"pushToRedo",value:function(t){this.redoList.push(t),console.log(t)}},{key:"undo",value:function(){var t=this,e=this.canvas.getContext("2d");if(this.undoList.length>0){var n=this.undoList.pop();this.redoList.push(this.canvas.toDataURL());var s=new Image;s.src=n,s.onload=function(){e.clearRect(0,0,t.canvas.width,t.canvas.height),e.drawImage(s,0,0,t.canvas.width,t.canvas.height)}}else e.clearRect(0,0,this.canvas.width,this.canvas.height)}},{key:"redo",value:function(){var t=this,e=this.canvas.getContext("2d");if(this.redoList.length>0){var n=this.redoList.pop();this.undoList.push(this.canvas.toDataURL());var s=new Image;s.src=n,s.onload=function(){e.clearRect(0,0,t.canvas.width,t.canvas.height),e.drawImage(s,0,0,t.canvas.width,t.canvas.height)}}}}]),t}()),v=new(function(){function t(){Object(r.a)(this,t),this.tool=void 0,Object(h.d)(this)}return Object(u.a)(t,[{key:"setTool",value:function(t){this.tool=t}},{key:"setLineWidth",value:function(t){this.tool.lineWidth=+t}},{key:"setStrokeColor",value:function(t){this.tool.strokeColor=t}},{key:"setFillColor",value:function(t){this.tool.fillColor=t}}]),t}()),d=n(6),f=n(5),b=function(){function t(e){Object(r.a)(this,t),this.canvas=void 0,this.ctx=void 0,this.canvas=e,this.ctx=e.getContext("2d"),this.destroyEvents()}return Object(u.a)(t,[{key:"fillColor",set:function(t){this.ctx.fillStyle=t}},{key:"strokeColor",set:function(t){this.ctx.strokeStyle=t}},{key:"lineWidth",set:function(t){this.ctx.lineWidth=t}},{key:"destroyEvents",value:function(){this.canvas.onmousemove=null,this.canvas.onmouseup=null,this.canvas.onmousedown=null}}]),t}(),m=function(t){Object(d.a)(n,t);var e=Object(f.a)(n);function n(t){var s;return Object(r.a)(this,n),(s=e.call(this,t)).mouseDown=!1,s.listen(),s}return Object(u.a)(n,[{key:"listen",value:function(){this.canvas.onmousemove=this.mouseMoveHandler.bind(this),this.canvas.onmouseup=this.mouseUpHandler.bind(this),this.canvas.onmousedown=this.mouseDownHandler.bind(this)}},{key:"mouseUpHandler",value:function(t){this.mouseDown=!1}},{key:"mouseDownHandler",value:function(t){var e=t.pageX-t.target.offsetLeft,n=t.pageY-t.target.offsetTop;this.mouseDown=!0,this.ctx.beginPath(),this.ctx.moveTo(e,n)}},{key:"mouseMoveHandler",value:function(t){var e=t.pageX-t.target.offsetLeft,n=t.pageY-t.target.offsetTop;this.mouseDown&&this.draw(e,n)}},{key:"draw",value:function(t,e){this.ctx.lineTo(t,e),this.ctx.stroke()}}]),n}(b),w=n(0),g=Object(c.a)((function(){var t=Object(s.useRef)();Object(s.useEffect)((function(){l.setCanvas(t.current),v.setTool(new m(t.current))}),[]);return Object(w.jsx)("div",{className:"canvas",children:Object(w.jsx)("canvas",{onMouseDown:function(){l.pushToUndo(t.current.toDataURL())},ref:t,width:600,height:400})})})),j=(n(11),n(7)),p=n.n(j),x=n(8),k=function(t){Object(d.a)(n,t);var e=Object(f.a)(n);function n(t){var s;return Object(r.a)(this,n),(s=e.call(this,t)).mouseDown=!1,s.startX=void 0,s.startY=void 0,s.saved=void 0,s.listen(),s}return Object(u.a)(n,[{key:"listen",value:function(){this.canvas.onmousemove=this.mouseMoveHandler.bind(this),this.canvas.onmouseup=this.mouseUpHandler.bind(this),this.canvas.onmousedown=this.mouseDownHandler.bind(this)}},{key:"mouseUpHandler",value:function(t){this.mouseDown=!1}},{key:"mouseDownHandler",value:function(t){this.mouseDown=!0,this.ctx.beginPath(),this.startX=t.pageX-t.target.offsetLeft,this.startY=t.pageY-t.target.offsetTop,this.saved=this.canvas.toDataURL()}},{key:"mouseMoveHandler",value:function(t){var e=t.pageX-t.target.offsetLeft,n=t.pageY-t.target.offsetTop,s=e-this.startX,a=n-this.startY;this.mouseDown&&this.draw(this.startX,this.startY,s,a)}},{key:"draw",value:function(t,e,n,s){var a=this,o=new Image;o.src=this.saved,o.onload=Object(x.a)(p.a.mark((function i(){return p.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:a.ctx.clearRect(0,0,a.canvas.width,a.canvas.height),a.ctx.drawImage(o,0,0,a.canvas.width,a.canvas.height),a.ctx.beginPath(),a.ctx.rect(t,e,n,s),a.ctx.fill(),a.ctx.stroke();case 6:case"end":return i.stop()}}),i)})))}}],[{key:"staticDraw",value:function(t,e,n,s,a,o){throw new Error("Method not implemented.")}}]),n}(b),O=function(t){Object(d.a)(n,t);var e=Object(f.a)(n);function n(t){var s;return Object(r.a)(this,n),(s=e.call(this,t)).mouseDown=void 0,s.startX=void 0,s.startY=void 0,s.saved=void 0,s.listen(),s}return Object(u.a)(n,[{key:"listen",value:function(){this.canvas.onmousemove=this.mouseMoveHandler.bind(this),this.canvas.onmousedown=this.mouseDownHandler.bind(this),this.canvas.onmouseup=this.mouseUpHandler.bind(this)}},{key:"mouseDownHandler",value:function(t){this.mouseDown=!0;var e=this.canvas.toDataURL();this.ctx.beginPath(),this.startX=t.pageX-t.target.offsetLeft,this.startY=t.pageY-t.target.offsetTop,this.saved=e}},{key:"mouseUpHandler",value:function(t){this.mouseDown=!1}},{key:"mouseMoveHandler",value:function(t){if(this.mouseDown){var e=t.pageX-t.target.offsetLeft,n=t.pageY-t.target.offsetTop,s=e-this.startX,a=n-this.startY,o=Math.sqrt(Math.pow(s,2)+Math.pow(a,2));this.draw(this.startX,this.startY,o)}}},{key:"draw",value:function(t,e,n){var s=this,a=new Image;a.src=this.saved,a.onload=Object(x.a)(p.a.mark((function o(){return p.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:s.ctx.clearRect(0,0,s.canvas.width,s.canvas.height),s.ctx.drawImage(a,0,0,s.canvas.width,s.canvas.height),s.ctx.beginPath(),s.ctx.arc(t,e,n,0,2*Math.PI),s.ctx.fill(),s.ctx.stroke();case 6:case"end":return o.stop()}}),o)})))}}]),n}(b),y=function(t){Object(d.a)(n,t);var e=Object(f.a)(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"draw",value:function(t,e){this.ctx.strokeStyle="white",this.ctx.lineTo(t,e),this.ctx.stroke()}}]),n}(m),D=function(t){Object(d.a)(n,t);var e=Object(f.a)(n);function n(t){var s;return Object(r.a)(this,n),(s=e.call(this,t)).mouseDown=void 0,s.currentX=void 0,s.currentY=void 0,s.name=void 0,s.saved=void 0,s.listen(),s.name="Line",s}return Object(u.a)(n,[{key:"listen",value:function(){this.canvas.onmousedown=this.mouseDownHandler.bind(this),this.canvas.onmouseup=this.mouseUpHandler.bind(this),this.canvas.onmousemove=this.mouseMoveHandler.bind(this)}},{key:"mouseDownHandler",value:function(t){this.mouseDown=!0,this.currentX=t.pageX-t.target.offsetLeft,this.currentY=t.pageY-t.target.offsetTop,this.ctx.beginPath(),this.ctx.moveTo(this.currentX,this.currentY),this.saved=this.canvas.toDataURL()}},{key:"mouseUpHandler",value:function(t){this.mouseDown=!1}},{key:"mouseMoveHandler",value:function(t){this.mouseDown&&this.draw(t.pageX-t.target.offsetLeft,t.pageY-t.target.offsetTop)}},{key:"draw",value:function(t,e){var n=this,s=new Image;s.src=this.saved,s.onload=Object(x.a)(p.a.mark((function a(){return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n.ctx.clearRect(0,0,n.canvas.width,n.canvas.height),n.ctx.drawImage(s,0,0,n.canvas.width,n.canvas.height),n.ctx.beginPath(),n.ctx.moveTo(n.currentX,n.currentY),n.ctx.lineTo(t,e),n.ctx.stroke();case 6:case"end":return a.stop()}}),a)})))}}]),n}(b),C=function(){return Object(w.jsxs)("div",{className:"toolbar",children:[Object(w.jsx)("button",{className:"toolbar__btn brush",onClick:function(){return v.setTool(new m(l.canvas))}}),Object(w.jsx)("button",{className:"toolbar__btn rect",onClick:function(){return v.setTool(new k(l.canvas))}}),Object(w.jsx)("button",{className:"toolbar__btn circle",onClick:function(){return v.setTool(new O(l.canvas))}}),Object(w.jsx)("button",{className:"toolbar__btn eraser",onClick:function(){return v.setTool(new y(l.canvas))}}),Object(w.jsx)("button",{className:"toolbar__btn line",onClick:function(){return v.setTool(new D(l.canvas))}}),Object(w.jsx)("input",{onChange:function(t){return function(t){v.setStrokeColor(t.target.value),v.setFillColor(t.target.value)}(t)},type:"color",className:"toolbar__btn color"}),Object(w.jsx)("button",{className:"toolbar__btn undo",onClick:function(){return l.undo()}}),Object(w.jsx)("button",{className:"toolbar__btn redo",onClick:function(){return l.redo()}}),Object(w.jsx)("button",{className:"toolbar__btn save",onClick:function(){return function(){var t=l.canvas.toDataURL();console.log(t);var e=document.createElement("a");e.href=t,e.download=l.sessionid+".jpg",document.body.appendChild(e),e.click(),document.body.removeChild(e)}()}})]})},L=function(){return Object(w.jsxs)("div",{className:"setting-bar",children:[Object(w.jsx)("label",{htmlFor:"line-width",children:"\u0422\u043e\u043b\u0449\u0438\u043d\u0430 \u043b\u0438\u043d\u0438\u0438"}),Object(w.jsx)("input",{onChange:function(t){return v.setLineWidth(t.target.value)},style:{margin:"0 10px"},id:"line-width",type:"number",defaultValue:1,min:1,max:50}),Object(w.jsx)("label",{htmlFor:"stroke-color",children:"\u0426\u0432\u0435\u0442 \u043e\u0431\u0432\u043e\u0434\u043a\u0438"}),Object(w.jsx)("input",{onChange:function(t){return v.setStrokeColor(t.target.value)},id:"stroke-color",type:"color"})]})};var T=function(){return Object(w.jsxs)("div",{className:"App",children:[Object(w.jsx)(C,{}),Object(w.jsx)(L,{}),Object(w.jsx)(g,{})]})},H=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,23)).then((function(e){var n=e.getCLS,s=e.getFID,a=e.getFCP,o=e.getLCP,i=e.getTTFB;n(t),s(t),a(t),o(t),i(t)}))};i.a.render(Object(w.jsx)(a.a.StrictMode,{children:Object(w.jsx)(T,{})}),document.getElementById("root")),H()}},[[22,1,2]]]);
//# sourceMappingURL=main.454ee440.chunk.js.map